# 微信小程序上线完整指南

## 第一步：注册微信小程序账号

1. **访问微信公众平台**
   - 网址：https://mp.weixin.qq.com/
   - 点击"立即注册" → 选择"小程序"

2. **填写账号信息**
   - 邮箱、密码、验证码等信息
   - 注意：每个邮箱只能注册一个小程序

3. **邮箱激活和信息登记**
   - 登录邮箱激活账号
   - 填写主体信息（个人/企业）
   - **个人账号**：需要身份证信息
   - **企业账号**：需要营业执照等信息

4. **获取 AppID**
   - 登录小程序后台：https://mp.weixin.qq.com/
   - 开发 → 开发管理 → 开发设置
   - 复制 **AppID**（格式：wxxxxxxxxxxxxxxxxx）

---

## 第二步：配置项目

### 1. 配置 AppID

打开 `manifest.json` 文件，找到 `mp-weixin` 配置，填入您的 AppID：

```json
"mp-weixin": {
  "appid": "您的小程序AppID",  // 在这里填入 AppID
  "setting": {
    "urlCheck": false
  },
  "usingComponents": true
}
```

### 2. 准备 TabBar 图标（必须）

小程序 tabBar 需要真实的图标文件，请准备以下图标并放在 `static` 目录：

- `static/icon-home.png` - 首页图标（81x81px）
- `static/icon-home-active.png` - 首页选中图标（81x81px）
- `static/icon-order.png` - 订单图标（81x81px）
- `static/icon-order-active.png` - 订单选中图标（81x81px）
- `static/icon-profile.png` - 我的图标（81x81px）
- `static/icon-profile-active.png` - 我的选中图标（81x81px）

**图标要求：**
- 尺寸：81x81 像素（建议使用 162x162，会自动缩放）
- 格式：PNG，支持透明背景
- 大小：每个图标不超过 40KB

如果没有图标，可以：
- 使用在线图标库（iconfont、iconify 等）
- 或者暂时注释掉 tabBar（修改 pages.json）

### 3. 配置小程序基本信息

在小程序后台设置：
- 小程序名称：上门喂猫（或您想要的名称）
- 小程序头像：上传 Logo（建议 256x256px）
- 小程序介绍：专业上门喂猫服务...

---

## 第三步：构建和上传

### 方式一：使用 HBuilderX（推荐）

1. **配置 HBuilderX**
   - 工具 → 设置 → 插件配置 → 微信开发者工具
   - 填写微信开发者工具的安装路径

2. **构建项目**
   - 在 HBuilderX 中打开项目
   - 发行 → 小程序-微信
   - 填写 AppID
   - 点击"发行"

3. **上传代码**
   - 构建完成后会自动打开微信开发者工具
   - 在微信开发者工具中：上传 → 填写版本号和项目备注 → 上传

### 方式二：使用命令行

1. **安装依赖**
   ```bash
   npm install
   ```

2. **构建小程序**
   ```bash
   npm run build:mp-weixin
   ```

3. **打开微信开发者工具**
   - 下载安装：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
   - 使用微信扫码登录

4. **导入项目**
   - 打开微信开发者工具
   - 点击"+" → 导入项目
   - 项目目录选择：`unpackage/dist/build/mp-weixin`
   - AppID 填写您的小程序 AppID
   - 项目名称：上门喂猫

5. **上传代码**
   - 在微信开发者工具中：上传 → 填写版本号 → 上传

---

## 第四步：配置服务器域名（如果使用）

如果您的项目需要调用后端 API，需要在小程序后台配置服务器域名：

1. 登录小程序后台
2. 开发 → 开发管理 → 开发设置 → 服务器域名
3. 添加您的 API 域名（需要 HTTPS）
4. 下载域名证书并上传（可选）

**注意：**
- request 合法域名必须是 HTTPS
- 不能使用 localhost、127.0.0.1
- 域名需要备案（国内服务器）

---

## 第五步：提交审核

1. **上传代码后，在小程序后台提交审核**
   - 登录小程序后台：https://mp.weixin.qq.com/
   - 版本管理 → 开发版本 → 点击"提交审核"

2. **填写审核信息**
   - 版本描述：描述本次更新的内容
   - 服务类目：选择"生活服务" → "宠物服务" 或相关类目
   - 标签：添加相关标签
   - 特殊账号：如果需要特殊权限，需要额外申请

3. **提交审核**
   - 确认信息无误后提交
   - 审核时间：通常 1-7 个工作日

---

## 第六步：发布上线

1. **审核通过后**
   - 在小程序后台：版本管理 → 审核版本
   - 点击"发布"

2. **小程序上线**
   - 发布成功后，用户可以通过搜索、扫码等方式访问您的小程序

---

## 重要注意事项

### ⚠️ 必须完成的配置

1. **AppID 配置**：必须在 manifest.json 中填写正确的 AppID
2. **TabBar 图标**：必须提供真实的图标文件
3. **小程序名称**：需要符合微信命名规范
4. **服务类目**：必须选择正确的服务类目

### ⚠️ 常见问题

1. **图标不显示**
   - 检查图标路径是否正确
   - 检查图标尺寸是否符合要求
   - 检查图标文件是否存在

2. **构建失败**
   - 检查 manifest.json 配置是否正确
   - 检查 pages.json 配置是否正确
   - 检查是否有语法错误

3. **审核不通过**
   - 服务类目选择不正确
   - 缺少隐私政策和服务协议
   - 功能不符合小程序规范
   - 内容违规

### 📋 审核清单

提交审核前，请确保：

- [ ] AppID 已配置
- [ ] TabBar 图标已准备
- [ ] 小程序名称已设置
- [ ] 小程序头像已上传
- [ ] 小程序介绍已填写
- [ ] 服务类目已选择
- [ ] 隐私政策已添加（如果需要）
- [ ] 代码已测试无错误
- [ ] 所有功能正常可用

---

## 后续维护

### 更新版本

1. 修改代码
2. 重新构建上传
3. 提交审核
4. 审核通过后发布

### 数据分析

- 在小程序后台查看用户数据、访问统计等
- 使用微信小程序数据分析功能

---

## 相关链接

- 微信公众平台：https://mp.weixin.qq.com/
- 微信开发者工具下载：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
- 小程序开发文档：https://developers.weixin.qq.com/miniprogram/dev/framework/
- uniapp 文档：https://uniapp.dcloud.net.cn/

---

## 快速命令参考

```bash
# 安装依赖
npm install

# 开发模式（微信小程序）
npm run dev:mp-weixin

# 构建生产版本
npm run build:mp-weixin

# 构建产物位置
unpackage/dist/build/mp-weixin
```
