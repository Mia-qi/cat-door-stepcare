<template>
  <view class="container">
    <!-- è½®æ’­å›¾ -->
    <view class="banner-section">
      <view class="banner-content">
        <text class="banner-title">ğŸ± ä¸Šé—¨å–‚çŒ«æœåŠ¡</text>
        <text class="banner-subtitle">ä¸“ä¸šã€è´´å¿ƒã€å¯é </text>
      </view>
    </view>

    <!-- å¿«é€Ÿä¸‹å• -->
    <view class="quick-order">
      <button class="quick-btn" @click="goToBooking">
        <text class="btn-icon">ğŸ±</text>
        <text class="btn-text">ç«‹å³é¢„çº¦</text>
      </button>
    </view>

    <!-- æœåŠ¡é¡¹ç›® -->
    <view class="services-section">
      <view class="section-title">
        <text class="title-text">æœåŠ¡é¡¹ç›®</text>
      </view>
      <view class="service-list">
        <view class="service-item" v-for="(service, index) in services" :key="index" @click="goToService(service)">
          <view class="service-icon">{{ service.icon }}</view>
          <text class="service-name">{{ service.name }}</text>
          <text class="service-desc">{{ service.desc }}</text>
          <text class="service-price">Â¥{{ service.price }}/æ¬¡</text>
        </view>
      </view>
    </view>

    <!-- æœåŠ¡ç‰¹è‰² -->
    <view class="features-section">
      <view class="section-title">
        <text class="title-text">æœåŠ¡ç‰¹è‰²</text>
      </view>
      <view class="feature-list">
        <view class="feature-item" v-for="(feature, index) in features" :key="index">
          <view class="feature-icon">{{ feature.icon }}</view>
          <text class="feature-text">{{ feature.text }}</text>
        </view>
      </view>
    </view>

    <!-- ç”¨æˆ·è¯„ä»· -->
    <view class="reviews-section">
      <view class="section-title">
        <text class="title-text">ç”¨æˆ·è¯„ä»·</text>
        <text class="more-text" @click="viewMoreReviews">æ›´å¤š></text>
      </view>
      <view class="review-list">
        <view class="review-item" v-for="(review, index) in reviews" :key="index">
          <view class="review-header">
            <text class="review-name">{{ review.name }}</text>
            <view class="review-stars">
              <text v-for="i in 5" :key="i" class="star">{{ i <= review.rating ? 'â­' : 'â˜†' }}</text>
            </view>
          </view>
          <text class="review-content">{{ review.content }}</text>
          <text class="review-time">{{ review.time }}</text>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨å¯¼èˆªæ ï¼ˆæ›¿ä»£ TabBarï¼‰ -->
    <view class="bottom-nav">
      <view class="nav-item active" @click="goToPage('/pages/index/index')">
        <text class="nav-icon">ğŸ </text>
        <text class="nav-text">é¦–é¡µ</text>
      </view>
      <view class="nav-item" @click="goToPage('/pages/order/order')">
        <text class="nav-icon">ğŸ“‹</text>
        <text class="nav-text">è®¢å•</text>
      </view>
      <view class="nav-item" @click="goToPage('/pages/profile/profile')">
        <text class="nav-icon">ğŸ‘¤</text>
        <text class="nav-text">æˆ‘çš„</text>
      </view>
    </view>
  </view>
</template>

<script>
export default {
  data() {
    return {
      services: [
        {
          id: 1,
          name: 'åŸºç¡€å–‚çŒ«',
          desc: 'å–‚é£Ÿ+æ¢æ°´+æ¸…ç†çŒ«ç ‚',
          price: 39,
          icon: 'ğŸ½ï¸'
        },
        {
          id: 2,
          name: 'æ ‡å‡†å–‚çŒ«',
          desc: 'åŸºç¡€æœåŠ¡+é™ªä¼´ç©è€',
          price: 59,
          icon: 'ğŸ®'
        },
        {
          id: 3,
          name: 'è´´å¿ƒå–‚çŒ«',
          desc: 'æ ‡å‡†æœåŠ¡+å¥åº·æ£€æŸ¥',
          price: 79,
          icon: 'â¤ï¸'
        },
        {
          id: 4,
          name: 'VIPå–‚çŒ«',
          desc: 'è´´å¿ƒæœåŠ¡+è§†é¢‘æŠ¥å‘Š',
          price: 99,
          icon: 'ğŸ‘‘'
        }
      ],
      features: [
        { icon: 'âœ…', text: 'ä¸“ä¸šæœåŠ¡' },
        { icon: 'ğŸ”’', text: 'å®‰å…¨å¯é ' },
        { icon: 'â°', text: 'å‡†æ—¶ä¸Šé—¨' },
        { icon: 'ğŸ“·', text: 'å®æ—¶åé¦ˆ' }
      ],
      reviews: [
        {
          name: 'å¼ **',
          rating: 5,
          content: 'æœåŠ¡å¾ˆä¸“ä¸šï¼ŒçŒ«å’ªå¾ˆå–œæ¬¢ï¼Œå¾ˆæ”¾å¿ƒï¼',
          time: '2024-01-15'
        },
        {
          name: 'æ**',
          rating: 5,
          content: 'å°å“¥å“¥å¾ˆç»†å¿ƒï¼Œæ¯å¤©éƒ½æœ‰è¯¦ç»†çš„åé¦ˆï¼Œç‚¹èµï¼',
          time: '2024-01-10'
        },
        {
          name: 'ç‹**',
          rating: 4,
          content: 'æ€§ä»·æ¯”å¾ˆé«˜ï¼Œä¸‹æ¬¡è¿˜ä¼šé¢„çº¦ã€‚',
          time: '2024-01-08'
        }
      ]
    }
  },
  onLoad() {
    // è®¾ç½®å½“å‰è§’è‰²ä¸ºç”¨æˆ·ç«¯
    uni.setStorageSync('current_role', 'user')
  },
  onPullDownRefresh() {
    setTimeout(() => {
      uni.stopPullDownRefresh()
      uni.showToast({
        title: 'åˆ·æ–°æˆåŠŸ',
        icon: 'success'
      })
    }, 1000)
  },
  methods: {
    goToBooking() {
      uni.navigateTo({
        url: '/pages/booking/booking'
      })
    },
    goToService(service) {
      uni.navigateTo({
        url: `/pages/service/service?id=${service.id}&name=${service.name}&price=${service.price}`
      })
    },
    viewMoreReviews() {
      uni.showToast({
        title: 'æ›´å¤šè¯„ä»·',
        icon: 'none'
      })
    },
    goToPage(url) {
      // ä½¿ç”¨ navigateTo è·³è½¬ï¼ˆå› ä¸ºå·²ç»ç¦ç”¨äº† tabBarï¼‰
      uni.navigateTo({
        url: url,
        fail: () => {
          // å¦‚æœå¤±è´¥ï¼Œå¯èƒ½æ˜¯è·¯ç”±é—®é¢˜ï¼Œä½¿ç”¨ reLaunch
          uni.reLaunch({
            url: url
          })
        }
      })
    }
  }
}
</script>

<style lang="scss" scoped>
.container {
  min-height: 100vh;
  background: #FFF8DC;
  padding-bottom: 40rpx;
}

.banner-section {
  width: 100%;
  height: 400rpx;
  margin-bottom: 30rpx;
  background: linear-gradient(135deg, #FF8C00 0%, #FFA500 100%);
  display: flex;
  align-items: center;
  justify-content: center;
}

.banner-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20rpx;
}

.banner-title {
  font-size: 56rpx;
  font-weight: bold;
  color: #ffffff;
}

.banner-subtitle {
  font-size: 32rpx;
  color: rgba(255, 255, 255, 0.9);
}

.quick-order {
  padding: 0 30rpx;
  margin-bottom: 40rpx;
}

.quick-btn {
  width: 100%;
  height: 100rpx;
  background: linear-gradient(135deg, #FF8C00 0%, #FFA500 100%);
  border-radius: 50rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15rpx;
  border: none;
  box-shadow: 0 8rpx 20rpx rgba(255, 140, 0, 0.3);
}

.btn-icon {
  font-size: 40rpx;
}

.btn-text {
  font-size: 36rpx;
  font-weight: bold;
  color: #ffffff;
}

.services-section,
.features-section,
.reviews-section {
  padding: 0 30rpx;
  margin-bottom: 40rpx;
}

.section-title {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30rpx;
}

.title-text {
  font-size: 36rpx;
  font-weight: bold;
  color: #333;
}

.more-text {
  font-size: 28rpx;
  color: #999;
}

.service-list {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20rpx;
}

.service-item {
  background: #ffffff;
  border-radius: 20rpx;
  padding: 30rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
}

.service-icon {
  font-size: 60rpx;
  margin-bottom: 15rpx;
}

.service-name {
  font-size: 32rpx;
  font-weight: bold;
  color: #333;
  margin-bottom: 10rpx;
}

.service-desc {
  font-size: 24rpx;
  color: #999;
  margin-bottom: 15rpx;
  text-align: center;
}

.service-price {
  font-size: 32rpx;
  font-weight: bold;
  color: #FF8C00;
}

.feature-list {
  display: flex;
  justify-content: space-around;
  background: #ffffff;
  border-radius: 20rpx;
  padding: 30rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
}

.feature-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10rpx;
}

.feature-icon {
  font-size: 50rpx;
}

.feature-text {
  font-size: 26rpx;
  color: #666;
}

.review-list {
  display: flex;
  flex-direction: column;
  gap: 20rpx;
}

.review-item {
  background: #ffffff;
  border-radius: 20rpx;
  padding: 30rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
}

.review-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15rpx;
}

.review-name {
  font-size: 30rpx;
  font-weight: bold;
  color: #333;
}

.review-stars {
  display: flex;
  gap: 5rpx;
}

.star {
  font-size: 24rpx;
}

.review-content {
  font-size: 28rpx;
  color: #666;
  line-height: 1.6;
  margin-bottom: 15rpx;
  display: block;
}

.review-time {
  font-size: 24rpx;
  color: #999;
}

.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: #ffffff;
  border-top: 1rpx solid #eee;
  display: flex;
  justify-content: space-around;
  padding: 20rpx 0;
  box-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);
  z-index: 999;
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8rpx;
  flex: 1;
}

.nav-icon {
  font-size: 44rpx;
}

.nav-text {
  font-size: 24rpx;
  color: #7A7E83;
}

.nav-item.active .nav-text {
  color: #FF8C00;
}

.container {
  min-height: 100vh;
  padding-bottom: 120rpx; /* ä¸ºåº•éƒ¨å¯¼èˆªæ ç•™å‡ºç©ºé—´ */
}
</style>
